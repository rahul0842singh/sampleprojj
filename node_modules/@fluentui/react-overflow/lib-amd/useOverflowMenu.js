define(["require", "exports", "react", "@fluentui/react-utilities", "./overflowContext", "./useOverflowCount"], function (require, exports, React, react_utilities_1, overflowContext_1, useOverflowCount_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.useOverflowMenu = void 0;
    function useOverflowMenu(id) {
        var elementId = react_utilities_1.useId('overflow-menu', id);
        var overflowCount = useOverflowCount_1.useOverflowCount();
        var registerOverflowMenu = overflowContext_1.useOverflowContext(function (v) { return v.registerOverflowMenu; });
        var updateOverflow = overflowContext_1.useOverflowContext(function (v) { return v.updateOverflow; });
        var ref = React.useRef(null);
        var isOverflowing = overflowCount > 0;
        react_utilities_1.useIsomorphicLayoutEffect(function () {
            if (ref.current) {
                return registerOverflowMenu(ref.current);
            }
        }, [registerOverflowMenu, isOverflowing, elementId]);
        react_utilities_1.useIsomorphicLayoutEffect(function () {
            if (isOverflowing) {
                updateOverflow();
            }
        }, [isOverflowing, updateOverflow, ref]);
        return { ref: ref, overflowCount: overflowCount, isOverflowing: isOverflowing };
    }
    exports.useOverflowMenu = useOverflowMenu;
});
//# sourceMappingURL=useOverflowMenu.js.map