{"version":3,"mappings":";;;;;;AAAA;AACA;AACA;AAEA;;;;;;AAMA,SAAgBA,iBAAiB;EAC/B,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGC,KAAK,CAACC,QAAQ,CAAC,CAAC,CAAC;EAC3C,MAAMC,SAAS,GAAGF,KAAK,CAACG,MAAM,CAA0BC,SAAS,CAAC;EAElE,MAAM;IAAEC;EAAc,CAAE,GAAGC,0CAAS,EAAE;EAEtC;EACA,MAAMC,YAAY,GAAGP,KAAK,CAACQ,WAAW,CAAC,MAAK;;IAC1C,MAAMC,cAAc,GAAG,eAAS,CAACC,OAAO,0CAAEC,qBAAqB,GAAGb,KAAK;IACvEC,QAAQ,CAACU,cAAc,IAAI,CAAC,CAAC;EAC/B,CAAC,EAAE,EAAE,CAAC;EAEN;EACA,MAAM,CAACG,cAAc,CAAC,GAAGZ,KAAK,CAACC,QAAQ,CAACY,2BAAS,EAAE,GAAG,IAAIC,cAAc,CAACP,YAAY,CAAC,GAAGH,SAAS,CAAC;EACnG,MAAMW,iBAAiB,GAAGf,KAAK,CAACQ,WAAW,CACxCQ,EAAmB,IAAI;IACtB,IAAI,CAACX,cAAc,IAAI,CAACO,cAAc,EAAE;MACtC;;IAGF;IACA,IAAIV,SAAS,CAACQ,OAAO,EAAE;MACrBE,cAAc,CAACK,SAAS,CAACf,SAAS,CAACQ,OAAO,CAAC;MAC3CR,SAAS,CAACQ,OAAO,CAACQ,MAAM,EAAE;;IAG5B,IAAIF,EAAE,EAAE;MACNd,SAAS,CAACQ,OAAO,GAAGL,cAAc,CAACc,aAAa,CAAC,KAAK,CAAC;MACvDH,EAAE,CAACI,qBAAqB,CAAC,aAAa,EAAElB,SAAS,CAACQ,OAAO,CAAC;MAC1DE,cAAc,CAACS,OAAO,CAACnB,SAAS,CAACQ,OAAO,CAAC;MACzCH,YAAY,EAAE;;EAElB,CAAC,EACD,CAACF,cAAc,EAAEO,cAAc,EAAEL,YAAY,CAAC,CAC/C;EAEDP,KAAK,CAACsB,SAAS,CAAC,MAAK;IACnB,OAAO,MAAMV,cAAc,aAAdA,cAAc,uBAAdA,cAAc,CAAEW,UAAU,EAAE;EAC3C,CAAC,EAAE,CAACX,cAAc,CAAC,CAAC;EAEpB,OAAO;IAAEd,KAAK;IAAEiB;EAAiB,CAAE;AACrC;AAzCAS","names":["useMeasureElement","width","setWidth","React","useState","container","useRef","undefined","targetDocument","react_shared_contexts_1","handleResize","useCallback","containerWidth","current","getBoundingClientRect","resizeObserver","react_utilities_1","ResizeObserver","measureElementRef","el","unobserve","remove","createElement","insertAdjacentElement","observe","useEffect","disconnect","exports"],"sourceRoot":"../src/","sources":["packages/react-components/react-table/src/hooks/useMeasureElement.ts"],"sourcesContent":["import { canUseDOM } from '@fluentui/react-utilities';\nimport * as React from 'react';\nimport { useFluent_unstable as useFluent } from '@fluentui/react-shared-contexts';\n\n/**\n * Provides a way of reporting element width.\n * Returns\n * `width` - current element width (0 by default),\n * `measureElementRef` - a ref function to be passed as `ref` to the element you want to measure\n */\nexport function useMeasureElement<TElement extends HTMLElement = HTMLElement>() {\n  const [width, setWidth] = React.useState(0);\n  const container = React.useRef<HTMLElement | undefined>(undefined);\n\n  const { targetDocument } = useFluent();\n\n  // the handler for resize observer\n  const handleResize = React.useCallback(() => {\n    const containerWidth = container.current?.getBoundingClientRect().width;\n    setWidth(containerWidth || 0);\n  }, []);\n\n  // Keep the reference of ResizeObserver in the state, as it should live through renders\n  const [resizeObserver] = React.useState(canUseDOM() ? new ResizeObserver(handleResize) : undefined);\n  const measureElementRef = React.useCallback(\n    (el: TElement | null) => {\n      if (!targetDocument || !resizeObserver) {\n        return;\n      }\n\n      // cleanup previous container\n      if (container.current) {\n        resizeObserver.unobserve(container.current);\n        container.current.remove();\n      }\n\n      if (el) {\n        container.current = targetDocument.createElement('div');\n        el.insertAdjacentElement('beforebegin', container.current);\n        resizeObserver.observe(container.current);\n        handleResize();\n      }\n    },\n    [targetDocument, resizeObserver, handleResize],\n  );\n\n  React.useEffect(() => {\n    return () => resizeObserver?.disconnect();\n  }, [resizeObserver]);\n\n  return { width, measureElementRef };\n}\n"]}